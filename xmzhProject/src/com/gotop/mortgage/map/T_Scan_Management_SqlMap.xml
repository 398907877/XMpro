<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="T_Scan_Management_SqlMap">
	<typeAlias alias="Scan" type="com.gotop.mortgage.model.Scan"/>
	
	<resultMap class="Scan" id="scanMap">
		<result property="scanID" jdbcType="string" column="ID"/>
		<result property="operationTime" jdbcType="string" column="INSERT_TIME"/>
		<result property="scanType" jdbcType="string" column="SCANNER_TYPE"/>
		<result property="fileName" jdbcType="string" column="FILE_NAME"/>
		<result property="warrantsID" jdbcType="string" column="WARRANTS_ID"/>
		<result property="filePath" jdbcType="string" column="FILE_PATH"/>
		
		<result property="fileReName" jdbcType="string" column="FILE_RE_NAME"/>
	</resultMap>
	
	<!-- 新增扫描件 -->
	<insert id="addScan" parameterClass="Scan">
		  INSERT INTO T_SCANNER_FILE
				    (ID,
				     INSERT_TIME,
				     SCANNER_TYPE,
				     FILE_NAME,
					 FILE_PATH,
				     WARRANTS_ID,
				     FILE_RE_NAME
				     )
				  VALUES
				    (seq_t_scanner_file.nextval,
				    to_char(sysdate,'yyyy-MM-DD HH24:mi:ss'),
				     #scanType:VARCHAR#,
				     #fileName:VARCHAR#,
				     #filePath:VARCHAR#,
				     0,
				     #fileReName:VARCHAR#
				     )
	</insert>
	
	<!-- 扫描件查询 -->
	<select id="queryScanList" parameterClass="java.util.HashMap" resultMap="scanMap">
	  select * from T_SCANNER_FILE
	  where 1=1
	  <isNotNull prepend="and" property="inTimeStrat" >
         <![CDATA[
            INSERT_TIME >= '$inTimeStrat$'
               ]]>
      </isNotNull>
      <isNotNull prepend="and" property="inTimeEnd" >
        <![CDATA[
             INSERT_TIME <=  '$inTimeEnd$'
               ]]>
      </isNotNull>
      <isNotNull prepend="and" property="scanType" >
             SCANNER_TYPE =  '$scanType$'
      </isNotNull>
      order by INSERT_TIME desc
	</select>
	
	<!-- 根据scaID查询扫描件 -->
	<select id="queryScan" parameterClass="com.gotop.mortgage.model.Scan" resultMap="scanMap">
	  select * from T_SCANNER_FILE
	  where ID='$scanID$'
	</select>
</sqlMap>